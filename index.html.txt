<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Salma's Supreme Realm ğŸ‘‘</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@800&display=swap" rel="stylesheet">
    <style>
        :root { --main: #ff007f; --bg: #000; --card: rgba(255,255,255,0.08); --text: #fff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Cairo', sans-serif; overflow: hidden; height: 100vh; transition: 0.5s; }
        .stars-container { position: fixed; top: 0; width: 100%; height: 100%; z-index: -1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle var(--d) infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.5); } }
        #splash { position: fixed; inset: 0; background: #000; display: flex; align-items: center; justify-content: center; z-index: 10000; }
        .splash-name { font-size: 5rem; font-family: 'Orbitron'; color: var(--main); text-shadow: 0 0 30px var(--main); }
        .container { height: 100vh; display: flex; flex-direction: column; padding: 20px; overflow-y: auto; padding-bottom: 120px; scrollbar-width: none; }
        section { display: none; animation: fadeIn 0.5s both; }
        section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .card { background: var(--card); border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(20px); border-radius: 25px; padding: 20px; margin-bottom: 20px; }
        .item-row { background: rgba(0,0,0,0.3); padding: 18px; border-radius: 18px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; border-right: 4px solid transparent; transition: 0.3s; }
        .item-row.done { border-right-color: var(--main); background: rgba(255,255,255,0.05); }
        .navbar { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; height: 75px; background: rgba(255,255,255,0.1); backdrop-filter: blur(25px); border-radius: 40px; display: flex; justify-content: space-around; align-items: center; border: 1px solid rgba(255,255,255,0.1); z-index: 1000; }
        .nav-btn { font-size: 1.6rem; opacity: 0.4; cursor: pointer; color: white; transition: 0.3s; }
        .nav-btn.active { opacity: 1; color: var(--main); transform: translateY(-8px) scale(1.2); }
        .btn-action { background: var(--main); color: white; border: none; padding: 18px; border-radius: 20px; width: 100%; font-weight: 900; cursor: pointer; font-family: 'Cairo'; }
        .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 20000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-box { background: var(--bg); border: 2px solid var(--main); border-radius: 30px; padding: 25px; width: 100%; text-align: center; }
        body.mode-holy { --main: #d4af37; --bg: #062c21; }
        body.mode-zen { --main: #ff85a2; --bg: #fff5f7; --text: #4a4a4a; --card: rgba(255,255,255,0.8); }
    </style>
</head>
<body class="mode-comedy" id="main-body">

<div class="stars-container" id="stars"></div>
<div id="splash"><div class="splash-name">SALMA</div></div>

<div id="modal" class="modal">
    <div class="modal-box">
        <h2 id="m-title" style="color:var(--main); margin-top:0;"></h2>
        <p id="m-body" style="font-size: 1.2rem; font-weight: bold;"></p>
        <div id="m-dua" style="font-style: italic; opacity: 0.8; margin-bottom: 20px; color: var(--main);"></div>
        <button class="btn-action" onclick="closeModal()">Ø§Ø³ØªÙ…Ø±Ø§Ø± âœ¨</button>
    </div>
</div>

<div class="container">
    <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 30px;">
        <div onclick="applyMode('comedy')" style="width:40px; height:40px; background:#ff007f; border-radius:50%; border:3px solid white; cursor:pointer;"></div>
        <div onclick="applyMode('holy')" style="width:40px; height:40px; background:#d4af37; border-radius:50%; border:3px solid white; cursor:pointer;"></div>
        <div onclick="applyMode('zen')" style="width:40px; height:40px; background:#ff85a2; border-radius:50%; border:3px solid white; cursor:pointer;"></div>
    </div>

    <section id="prayers" class="active">
        <h1 id="h-prayers" style="text-align: center;">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª</h1>
        <div class="card">
            <div class="item-row" id="fajr" onclick="markPrayer('fajr', 2, 4)"><span>ğŸŒ… ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø± (5:13 Øµ)</span> <b>Ø±ÙƒØ¹ØªØ§Ù†</b></div>
            <div class="item-row" id="dhuhr" onclick="markPrayer('dhuhr', 4, 12)"><span>â˜€ï¸ ØµÙ„Ø§Ø© Ø§Ù„Ø¸Ù‡Ø± (12:09 Ù…)</span> <b>Ù¤ Ø±ÙƒØ¹Ø§Øª</b></div>
            <div class="item-row" id="asr" onclick="markPrayer('asr', 4, 15)"><span>â›… ØµÙ„Ø§Ø© Ø§Ù„Ø¹ØµØ± (3:15 Ù…)</span> <b>Ù¤ Ø±ÙƒØ¹Ø§Øª</b></div>
            <div class="item-row" id="maghrib" onclick="markPrayer('maghrib', 3, 17)"><span>ğŸŒ† ØµÙ„Ø§Ø© Ø§Ù„Ù…ØºØ±Ø¨ (5:38 Ù…)</span> <b>Ù£ Ø±ÙƒØ¹Ø§Øª</b></div>
            <div class="item-row" id="isha" onclick="markPrayer('isha', 4, 19)"><span>ğŸŒ™ ØµÙ„Ø§Ø© Ø§Ù„Ø¹Ø´Ø§Ø¡ (6:57 Ù…)</span> <b>Ù¤ Ø±ÙƒØ¹Ø§Øª</b></div>
        </div>
        <div style="display:flex; justify-content: space-between; gap:10px;">
            <button class="btn-action" style="padding:12px; font-size:0.9rem;" onclick="openAzkar('morning')">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</button>
            <button class="btn-action" style="padding:12px; font-size:0.9rem;" onclick="openAzkar('evening')">Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡</button>
        </div>
    </section>

    <section id="rewards">
        <h1 style="text-align: center;">Ù…Ø±ÙƒØ² Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ğŸ</h1>
        <div class="card">
            <h3 style="color:var(--main)">ğŸ† ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ØµÙ„Ø§Ø©</h3>
            <div id="p-challenges"></div>
            <h3 style="color:var(--main); margin-top:20px;">ğŸ›¡ï¸ ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø«Ø¨Ø§Øª</h3>
            <div id="h-challenges"></div>
        </div>
        <div class="card">
            <h3>Ø£ÙˆØ³Ù…Ø© Ø³Ù„Ù…Ù‰ ğŸ–ï¸</h3>
            <div id="badges-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;"></div>
        </div>
    </section>

    <section id="stats">
        <h1 id="h-stats" style="text-align: center;">Ø­ØµØ§Ø¯ Ø§Ù„Ø¹Ø¸Ù…Ø©</h1>
        <div class="card" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
            <div><small>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ÙƒØ¹Ø§Øª</small><h2 id="st-total" style="color:var(--main); margin:5px 0;">0</h2></div>
            <div><small>Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ø¨Ø§Øª</small><h2 id="st-hero" style="color:var(--main); margin:5px 0;">0</h2></div>
            <div><small>Ù„Ù‚Ø¨ Ø³Ù„Ù…Ù‰</small><div id="st-rank" style="background:var(--main); color:white; border-radius:10px; padding:2px 10px; font-size:0.8rem;">Ù…Ø¨ØªØ¯Ø¦Ø©</div></div>
        </div>
    </section>

    <section id="hero">
        <h1 id="h-hero-title" style="text-align: center;">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¨Ø±ÙˆØª</h1>
        <div class="card" style="text-align: center; padding: 40px 20px;">
            <div style="font-size: 5rem; font-weight: 900; color: var(--main);" id="hero-display">0</div>
            <p id="h-hero-desc" style="font-size: 1.2rem; margin: 20px 0;">ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¹Ø¸Ù…Ø©</p>
            <button class="btn-action" id="hero-btn" onclick="claimHero()">Ø£Ù†Ø§ Ø¨Ø·Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© âœ¨</button>
            <button onclick="resetHero()" id="hero-reset-btn" style="background:none; border:none; color:gray; margin-top:30px; text-decoration: underline; font-family:'Cairo';">Ø¶Ø¹ÙØª (ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯) ğŸ’”</button>
        </div>
    </section>
</div>

<div class="navbar">
    <div class="nav-btn active" onclick="nav('prayers', this)">ğŸ•‹</div>
    <div class="nav-btn" onclick="nav('rewards', this)">ğŸ</div>
    <div class="nav-btn" onclick="nav('stats', this)">ğŸ“Š</div>
    <div class="nav-btn" onclick="nav('hero', this)">ğŸ‘‘</div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('salma_final_ultimate')) || { 
        days:{}, hero:0, totalR:0, lastH:"", ui:'comedy', fStreak:0, lastF:"", completed:[] 
    };
    let today = new Date().toDateString();
    if(!db.days[today]) db.days[today] = { p:[], r:0 };

    const modes = {
        comedy: {
            h: ["Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª", "Ø­ØµØ§Ø¯ Ø§Ù„Ø¹Ø¸Ù…Ø©", "Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¬Ø¨Ø±ÙˆØª"],
            cheat: ["Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ù†ØµØ§Ø¨Ø©! ğŸ˜‚", "Ø§Ù„ÙˆÙ‚Øª Ù„Ø³Ù‡ Ù…Ø¬Ø§Ø´ØŒ Ø¨Ù„Ø§Ø´ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù‚Ø±Ø¹ Ø¯ÙŠ ÙˆØµÙ„ÙŠ Ø§Ù„Ø£ÙˆÙ„! ğŸ™„"],
            dua: "Ø¹Ø§Ø´ ÙŠØ§ ÙˆØ­Ø´.. Ø±ÙƒØ¹Ø§ØªÙƒ ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù† ÙŠØ§ Ø¨Ø·Ù„Ø©!",
            rank: ["Ù†ØµØ§Ø¨Ø© Ù„Ø³Ù‡", "Ù…ÙƒØ§ÙØ­Ø©", "ÙˆØ­Ø´ ØµÙ„Ø§Ø©", "Ø£Ø³Ø·ÙˆØ±Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…"],
            h_btn: "Ø£Ù†Ø§ Ø¨Ø·Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© âœ¨", h_reset: "Ø¶Ø¹ÙØª (ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯) ğŸ’”"
        },
        holy: {
            h: ["Ø²Ø§Ø¯ Ø§Ù„Ø·Ø§Ø¹Ø§Øª", "Ø³Ø¬Ù„ Ø§Ù„Ø­Ø³Ù†Ø§Øª", "Ù…Ù‚Ø§Ù… Ø§Ù„Ø«Ø¨Ø§Øª"],
            cheat: ["ØµØ¨Ø±Ø§Ù‹ ÙŠØ§ Ø±ÙÙŠÙ‚Ø© âœ¨", "Ù„Ù… ÙŠØ­Ù† ÙˆÙ‚Øª Ø§Ù„ÙØ±ÙŠØ¶Ø© Ø¨Ø¹Ø¯ØŒ Ø§Ù„ØµÙ„Ø§Ø© ÙƒØ§Ù†Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† ÙƒØªØ§Ø¨Ø§Ù‹ Ù…ÙˆÙ‚ÙˆØªØ§Ù‹."],
            dua: "ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹ØªÙƒÙØŒ ÙˆØ²Ø§Ø¯ÙƒÙ Ù…Ù† ÙØ¶Ù„Ù‡ ÙˆÙ†ÙˆØ±Ù‡.",
            rank: ["Ø·Ø§Ù„Ø¨Ø© Ø¹Ù„Ù…", "Ø¹Ø§Ø¨Ø¯Ø©", "Ù‚Ø§Ù†ØªØ©", "Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„ØµÙ„Ø§Ø©"],
            h_btn: "Ø«Ø¨ØªÙ†ÙŠ Ø§Ù„Ù„Ù‡ Ø§Ù„ÙŠÙˆÙ… ğŸŒ¿", h_reset: "Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡ (Ø¥Ø¹Ø§Ø¯Ø©) ğŸŒ™"
        },
        zen: {
            h: ["ÙˆÙ‚Øª Ø§Ù„Ø³ÙƒÙŠÙ†Ø©", "Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²", "Ø£Ù†Ø§ Ø£Ø³ØªØ·ÙŠØ¹"],
            cheat: ["Ø§Ù†ØªØ¸Ø±ÙŠ Ù‚Ù„ÙŠÙ„Ø§Ù‹ â˜ï¸", "Ø¬Ù…ÙŠÙ„ØªÙŠ Ø³Ù„Ù…Ù‰ØŒ Ø§Ù„ÙˆÙ‚Øª Ù„Ù… ÙŠØ­Ù† Ø¨Ø¹Ø¯.. Ø§Ù„Ù‚Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„ØµØ¨Ø±."],
            dua: "ÙØ®ÙˆØ±Ø© Ø¨ÙƒÙ Ø¬Ø¯Ø§Ù‹.. Ø±ÙˆØ­ÙƒÙ Ø£ØµØ¨Ø­Øª Ø£Ø¬Ù…Ù„ Ø§Ù„Ø¢Ù†.",
            rank: ["Ø¨Ø¯Ø§ÙŠØ© Ø±Ù‚ÙŠÙ‚Ø©", "Ø²Ù‡Ø±Ø© Ù…ØªÙØªØ­Ø©", "Ù†Ø¬Ù…Ø© Ø³Ø§Ø·Ø¹Ø©", "Ù…Ù„ÙƒØ© Ø§Ù„Ù‡Ø¯ÙˆØ¡"],
            h_btn: "ÙŠÙˆÙ… Ø³Ø¹ÙŠØ¯ ÙˆÙ†Ø§Ø¬Ø­ ğŸŒ¸", h_reset: "Ø³Ø£Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ğŸ€"
        }
    };

    const pCh = [{id:'p1',t:"ØµÙ„Ø§Ø© 5 ÙØ±ÙˆØ¶ ÙƒØ§Ù…Ù„Ø©",check:()=>db.days[today].p.length>=5,b:"ğŸ–ï¸ ÙˆØ³Ø§Ù… Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…"},{id:'p2',t:"ØµÙ„Ø§Ø© Ø§Ù„ÙØ¬Ø± 3 Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©",check:()=>db.fStreak>=3,b:"ğŸŒ… ÙˆØ­Ø´ Ø§Ù„ÙØ¬Ø±"}];
    const hCh = [{id:'h1',t:"Ø«Ø¨Ø§Øª Ù„Ù…Ø¯Ø© 7 Ø£ÙŠØ§Ù…",check:()=>db.hero>=7,b:"ğŸ›¡ï¸ Ø¨Ø·Ù„Ø© Ø§Ù„ØµÙ…ÙˆØ¯"},{id:'h2',t:"Ø«Ø¨Ø§Øª Ù„Ù…Ø¯Ø© Ø´Ù‡Ø± ÙƒØ§Ù…Ù„",check:()=>db.hero>=30,b:"ğŸ† ÙˆØ³Ø§Ù… Ø§Ù„Ø¥Ø±Ø§Ø¯Ø©"}];

    function applyMode(m) {
        db.ui = m; document.getElementById('main-body').className = 'mode-' + m;
        const c = modes[m];
        document.getElementById('h-prayers').innerText = c.h[0];
        document.getElementById('h-stats').innerText = c.h[1];
        document.getElementById('h-hero-title').innerText = c.h[2];
        document.getElementById('hero-btn').innerText = c.h_btn;
        document.getElementById('hero-reset-btn').innerText = c.h_reset;
        save(); renderStats(); renderRewards();
    }

    function markPrayer(id, r, hr) {
        let now = new Date().getHours();
        if(db.days[today].p.includes(id)) return;
        if(now < hr) return showModal(modes[db.ui].cheat[0], modes[db.ui].cheat[1]);
        db.days[today].p.push(id); db.days[today].r += r; db.totalR += r;
        if(id === 'fajr') {
            let y = new Date(); y.setDate(y.getDate()-1);
            db.fStreak = (db.lastF === y.toDateString()) ? db.fStreak + 1 : 1;
            db.lastF = today;
        }
        checkChallenges(); save(); updateUI();
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        showModal("ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡", "", modes[db.ui].dua);
    }

    function checkChallenges() {
        [...pCh, ...hCh].forEach(c => {
            if(!db.completed.includes(c.id) && c.check()) {
                db.completed.push(c.id);
                showModal("Ø¥Ù†Ø¬Ø§Ø² Ø¬Ø¯ÙŠØ¯! ğŸ‰", `Ù…Ø¨Ø±ÙˆÙƒ ÙŠØ§ Ø¨Ø·Ù„Ø©: ${c.b}`);
            }
        });
    }

    function renderRewards() {
        let pNext = pCh.find(c => !db.completed.includes(c.id));
        let hNext = hCh.find(c => !db.completed.includes(c.id));
        document.getElementById('p-challenges').innerHTML = pNext ? `<div class="item-row">ğŸ¯ ${pNext.t}</div>` : "ØªÙ…Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·ÙˆÙ„Ø§Øª! ğŸ”¥";
        document.getElementById('h-challenges').innerHTML = hNext ? `<div class="item-row">ğŸ’ª ${hNext.t}</div>` : "Ø«Ø¨Ø§Øª Ø£Ø³Ø·ÙˆØ±ÙŠ! ğŸ’";
        let grid = document.getElementById('badges-grid'); grid.innerHTML = '';
        db.completed.forEach(id => {
            let c = [...pCh, ...hCh].find(x => x.id === id);
            if(c) grid.innerHTML += `<div class="item-row" style="background:rgba(255,0,127,0.1); justify-content:center; font-size:0.9rem;">${c.b}</div>`;
        });
    }

    function claimHero() {
        if(db.lastH === today) return;
        db.hero++; db.lastH = today; checkChallenges(); save(); updateUI();
        confetti({ particleCount: 200, shapes: ['star'] });
    }

    function resetHero() {
        if(confirm("Ù…ØªØ£ÙƒØ¯Ø©ØŸ Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ù‡ÙŠØµÙØ±!")) { db.hero = 0; db.lastH = ""; save(); updateUI(); }
    }

    function nav(id, el) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
        if(id === 'rewards') renderRewards();
        if(id === 'stats') renderStats();
    }

    function openAzkar(type) { showModal(type==='morning'?"Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­":"Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡", "Ø§Ù„Ø¢Ù† Ø±ÙƒØ²ÙŠ ÙÙŠ Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø¬ÙŠØ¯Ø§Ù‹ ÙŠØ§ Ø³Ù„Ù…Ù‰.."); }
    function showModal(t, b, d="") {
        document.getElementById('m-title').innerText = t;
        document.getElementById('m-body').innerText = b;
        document.getElementById('m-dua').innerText = d;
        document.getElementById('modal').style.display = 'flex';
    }
    function closeModal() { document.getElementById('modal').style.display = 'none'; }
    function save() { localStorage.setItem('salma_final_ultimate', JSON.stringify(db)); }
    function updateUI() {
        document.getElementById('hero-display').innerText = db.hero;
        document.querySelectorAll('.item-row').forEach(el => {
            if(db.days[today].p.includes(el.id)) el.classList.add('done');
        });
    }
    function renderStats() {
        document.getElementById('st-total').innerText = db.totalR;
        document.getElementById('st-hero').innerText = db.hero;
        let rankIdx = Math.min(Math.floor(db.totalR / 50), 3);
        document.getElementById('st-rank').innerText = modes[db.ui].rank[rankIdx];
    }

    for(let i=0; i<40; i++) {
        let s = document.createElement('div'); s.className = 'star';
        s.style.width = s.style.height = Math.random()*3+'px';
        s.style.top = Math.random()*100+'%'; s.style.left = Math.random()*100+'%';
        s.style.setProperty('--d', (Math.random()*3+2)+'s');
        document.getElementById('stars').appendChild(s);
    }
    setTimeout(() => document.getElementById('splash').style.display='none', 2000);
    applyMode(db.ui); updateUI();
</script>
</body>
</html>